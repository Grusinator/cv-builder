{% extends "base_cv_content.html" %}

{% block content %}
<header class="major">
    <h2>Projects</h2>
</header>
<section>
    <form method="post" action="{% url 'fetch_github_projects' %}">
        {% csrf_token %}
        <input type="text" name="github_username" placeholder="GitHub Username">
        <input type="password" name="github_token" placeholder="GitHub Token">
        <button type="submit">Fetch Projects from GitHub</button>
        <a href="{% url 'add_project' %}">Add Project Manually</a>
    </form>
    <h3>Project List</h3>
    <ul>
        {% for project in projects %}
        <li>{{ project.name }} - {{ project.description }}
            <a href="{% url 'update_project' project.project_id %}">Edit</a>
            <form action="{% url 'delete_project' project.project_id %}" method="post" style="display: inline;">
                {% csrf_token %}
                <button type="submit" onclick="return confirm('Are you sure you want to delete this project?');">
                    Delete
                </button>
            </form>
        </li>
        {% empty %}
        <p>No projects available at the moment.</p>
        {% endfor %}
    </ul>
</section>
{% endblock %}
